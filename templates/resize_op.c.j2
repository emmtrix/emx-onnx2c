void {{ op_name }}(const {{ c_type }} {{ input0 }}{{ input_suffix }}, {{ c_type }} {{ output }}{{ output_suffix }}) {
    const double scale_h = {{ scale_h_literal }};
    const double scale_w = {{ scale_w_literal }};
    for (size_t n = 0; n < {{ batch }}; ++n) {
        for (size_t c = 0; c < {{ channels }}; ++c) {
            for (size_t oh = 0; oh < {{ out_h }}; ++oh) {
                int ih = (int)((double)oh / scale_h);
                if (ih < 0) {
                    ih = 0;
                } else if (ih >= {{ in_h }}) {
                    ih = {{ in_h }} - 1;
                }
                for (size_t ow = 0; ow < {{ out_w }}; ++ow) {
                    int iw = (int)((double)ow / scale_w);
                    if (iw < 0) {
                        iw = 0;
                    } else if (iw >= {{ in_w }}) {
                        iw = {{ in_w }} - 1;
                    }
                    {{ output }}[n][c][oh][ow] = {{ input0 }}[n][c][ih][iw];
                }
            }
        }
    }
}
